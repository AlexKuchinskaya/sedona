const ESCAPE=27,showFormButton=document.querySelector(".accommodation-search"),accommodationForm=document.querySelector(".accommodation-form"),formInputs=accommodationForm.querySelectorAll("input"),checkinInput=accommodationForm.querySelector(".check-in-input"),checkoutInput=accommodationForm.querySelector(".check-out-input"),adultsInput=accommodationForm.querySelector(".tourist-number-adults"),childrenInput=accommodationForm.querySelector(".tourist-number-children"),formError=accommodationForm.querySelector(".accommodation-form-error");let isStorageSupport=!0,storage="";accommodationForm.classList.remove("accommodation-form-nojs");const onShowFormButtonClick=()=>{accommodationForm.classList.contains("accommodation-form-closed")?(accommodationForm.classList.remove("accommodation-form-closed"),accommodationForm.classList.add("accommodation-form-opened")):(accommodationForm.classList.add("accommodation-form-closed"),accommodationForm.classList.remove("accommodation-form-opened")),storage?(checkinInput.value=storage,checkoutInput.focus()):checkinInput.focus()};showFormButton.addEventListener("click",o=>{o.preventDefault(),accommodationForm.classList.contains("accommodation-form-closed")?(accommodationForm.classList.remove("accommodation-form-closed"),accommodationForm.classList.add("accommodation-form-opened")):(accommodationForm.classList.add("accommodation-form-closed"),accommodationForm.classList.remove("accommodation-form-opened")),storage?(checkinInput.value=storage,checkoutInput.focus()):checkinInput.focus()});const onWindowEscape=()=>{accommodationForm.classList.contains("accommodation-form-opened")&&(accommodationForm.classList.remove("accommodation-form-opened"),accommodationForm.classList.remove("accommodation-form-error"),accommodationForm.classList.add("accommodation-form-closed"))};window.addEventListener("keydown",o=>{27===o.keyCode&&(o.preventDefault(),accommodationForm.classList.contains("accommodation-form-opened")&&(accommodationForm.classList.remove("accommodation-form-opened"),accommodationForm.classList.remove("accommodation-form-error"),accommodationForm.classList.add("accommodation-form-closed")))}),accommodationForm.addEventListener("submit",o=>{if(checkoutInput.value&&adultsInput.value&&childrenInput.value)isStorageSupport&&(localStorage.setItem("checckin",checkinInput.value),localStorage.setItem("checckout",checkoutInput.value),localStorage.setItem("adultsAmount",adultsInput.value),localStorage.setItem("childrenAmount",childrenInput.value));else{o.preventDefault(),formError&&formError.classList.remove("accommodation-form-error");accommodationForm.classList.contains("accommodation-form-error")?accommodationForm.classList.remove("accommodation-form-error"):accommodationForm.classList.add("accommodation-form-error")}});
